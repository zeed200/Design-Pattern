نمط الـ Iterator  هو واحد من الأنماط التصميمية (Design Patterns) التي تسمح لك بالمرور على عناصر مجموعة ما (مثل القائمة List أو القاموس Dictionary) مهما كان نوعها دون الحاجة لمعرفة التفاصيل الداخلية لكيفية تخزين هذه العناصر.

في بايثون يعتمد هذا النمط على دالتين  (Magic Methods):

__iter__(): تُرجع كائن الـ Iterator نفسه.

__next__(): تُرجع العنصر التالي في المجموعة. إذا انتهت العناصر، ترفع استثناء StopIteration.

وفي Django نستخدم هذا النمط بشكل مكثف عند التعامل مع قواعد البيانات الكبيرة.

استخدام .iterator() في QuerySets
إذا كان لديك جدول يحتوي على مليون سجل، وقمت بعمل User.objects.all() فإن Django سيحاول تحميل المليون سجل كلها في الذاكرة (RAM) مما قد يؤدي لتعطل الخادم.

ماهو الفرق بين Iterable و Iterator ؟

ال Iterator : هو الكائن الذي يتذكر مكانه الحالي ويعطيك العنصر التالي بـ __next__ في بايثون .

ال Iterable : أي شيء يمكنك استخدامه في for loop. لديه دالة __iter__ في بايثون .

وفوائده :

توفير الموارد: مثالي للتعامل مع ملفات ضخمة أو تدفقات بيانات (Streams) لا نهائية.

فصل المسؤوليات: الكود الذي يستخدم البيانات لا يهتم بكيفية ترتيبها أو تخزينها داخل الكائن.

دعم  ال(Lazy Evaluation): لا يتم حساب القيمة إلا عند الحاجة إليها.